(function(){window.Tito={developmentMode:!1,api_base_url:"https://api.tito.io/",base_url:"https://ti.to/",defaultOverflow:null,onMessages:[],instance_ids:{},widgets:{},buttons:{},body:function(){return document.getElementsByTagName("body")[0]},set_body_overflow_hidden:function(){return Tito.body()?Tito.body().style.overflow="hidden":void 0},set_body_overflow_default:function(){return Tito.body()?Tito.body().style.overflow=Tito.defaultOverflow:void 0},set_default_body_overflow:function(){return Tito.body()?Tito.defaultOverflow=Tito.body().style.overflow:void 0},next_instance_id:function(t){return new Tito.InstanceID(t)},lessThanIE10:function(){return/MSIE\s([\d.]+)/.test(navigator.userAgent)?new Number(RegExp.$1)<=9:!1},mobile:function(){return/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},modern_and_not_mobile:function(){return!Tito.mobile()&&!!window.postMessage&&!Tito.lessThanIE10()},secure:function(){return/https.*/.test(document.location.protocol)},new_callback:function(t){var e;return e="tito_callback"+Math.floor(999999*Math.random()).toString(),window[e]=function(e){return"function"==typeof t?t(e):void 0},e},jsonp:function(t,e){var n;return n=document.createElement("script"),n.src=t+"&callback="+Tito.new_callback(e),document.getElementsByTagName("head")[0].appendChild(n)},releases_for:function(t,e){return Tito.jsonp(Tito.api_base_url+t+"/releases/current.json?1=1",function(t){return e&&"function"==typeof e.success&&e.success(t),"function"==typeof e?e(t):void 0})},events:{"event:landing":[],"registration:started":[],"registration:filling":[],"registration:finished":[],"registration:complete":[]},on:function(t,e){return Tito.events[t].push(e)},fire:function(t,e){var n,o,i,r;for(i=Tito.events[t],r=[],n=0,o=i.length;o>n;n++)t=i[n],r.push(t(e));return r},widget:function(t,e){return e.event_path=t,new Tito.Widget(e).build()},button:function(t,e){return e.event_path=t,new Tito.Button(e).build()},id_for_event_path:function(t){return new Tito.Base(t,options).id_for_event_path()},button_elements:function(){return document.querySelectorAll("tito-button")},widget_elements:function(){return document.querySelectorAll("tito-widget")}}}).call(this),window.Tito.contentLoaded=function(t,e){var n=!1,o=!0,i=t.document,r=i.documentElement,s=i.addEventListener,a=s?"addEventListener":"attachEvent",u=s?"removeEventListener":"detachEvent",c=s?"":"on",l=function(o){("readystatechange"!=o.type||"complete"==i.readyState)&&(("load"==o.type?t:i)[u](c+o.type,l,!1),!n&&(n=!0)&&e.call(t,o.type||o))},d=function(){try{r.doScroll("left")}catch(t){return void setTimeout(d,50)}l("poll")};if("complete"==i.readyState)e.call(t,"lazy");else{if(!s&&r.doScroll){try{o=!t.frameElement}catch(_){}o&&d()}i[a](c+"DOMContentLoaded",l,!1),i[a](c+"readystatechange",l,!1),t[a](c+"load",l,!1)}},function(){window.Tito.serialize=function(t){if(t&&"FORM"===t.nodeName){var e,n,o=[];for(e=t.elements.length-1;e>=0;e-=1)if(""!==t.elements[e].name)switch(t.elements[e].nodeName){case"INPUT":switch(t.elements[e].type){case"text":case"hidden":case"password":case"button":case"reset":case"submit":o.push(t.elements[e].name+"="+encodeURIComponent(t.elements[e].value));break;case"checkbox":case"radio":t.elements[e].checked&&o.push(t.elements[e].name+"="+encodeURIComponent(t.elements[e].value));break;case"file":}break;case"TEXTAREA":o.push(t.elements[e].name+"="+encodeURIComponent(t.elements[e].value));break;case"SELECT":switch(t.elements[e].type){case"select-one":o.push(t.elements[e].name+"="+encodeURIComponent(t.elements[e].value));break;case"select-multiple":for(n=t.elements[e].options.length-1;n>=0;n-=1)t.elements[e].options[n].selected&&o.push(t.elements[e].name+"="+encodeURIComponent(t.elements[e].options[n].value))}break;case"BUTTON":switch(t.elements[e].type){case"reset":case"submit":case"button":o.push(t.elements[e].name+"="+encodeURIComponent(t.elements[e].value))}}return o.join("&")}}}(),function(){Tito.Errors={ContainerNotFound:function(t){return this.message=t,this.name="ContainerNotFound"}}}.call(this),function(){Tito.Iframe=function(){function t(t,e){this.id=t,this.url=e,this.built=!1}return t.prototype.build=function(){var t;return Tito.modern_and_not_mobile()?(t=document.createElement("iframe"),t.style.position="fixed",t.style.top=0,t.style.bottom=0,t.style.right=0,t.style.left=0,t.style.width="100%",t.style.height="100%",t.style.border="none",t.style.margin=0,t.setAttribute("allowtransparency",!0),t.style.display="none",t.style.zIndex=9999,t.id=this.id,document.body.appendChild(t),this.built=!0,this.reset()):!1},t.prototype.element=function(){return this._element||(this._element=document.getElementById(this.id))},t.prototype.fire_load_event=function(){return this.element().contentWindow.postMessage({action:"TitoMachine.load"},"*")},t.prototype.reset=function(){return Tito.modern_and_not_mobile()?(this.built||this.build(),this.element().style.display="none",this.element().src=this.url):!1},t.prototype.load=function(){return this.element().style.display="block",Tito.set_body_overflow_hidden()},t.prototype.load_payment_form=function(t,e){return this.load(),this.element().contentWindow.postMessage({formdata:t,action:e},"*")},t.prototype.load_tickets_form=function(){return this.load(),this.element().contentWindow.postMessage({action:"Tito.show_tickets"},"*")},t}()}.call(this),function(){Tito.InstanceID=function(){function t(t){this.event_path=t}return t.prototype.constant_id=function(){return"tito-"+(this.event_path+"").replace("/","-")},t.prototype.id=function(){var t;return t=(Tito.instance_ids[this.event_path]||0)+1,Tito.instance_ids[this.event_path]=t,this.constant_id()+"-"+t},t}()}.call(this),function(){Tito.Base=function(){function t(t){this.container=t.container,this.container_id=t.container_id,this.options=t,this.container_id&&(this.container=document.getElementById(this.container_id)),this.container&&(this.initial_html=this.container.innerHTML),this._release_ids=t.releases,this._discount_code=t.discount_code,this._event_path=t.event_path,this.instance_id=new Tito.InstanceID(this.event_path()).id(),Tito.widgets[this.instance_id]=this}return t.prototype.event_path=function(){return this._event_path?this._event_path.trim().replace(/(^\/)|(\/$)/g,""):this.container?this._event_path=this.container.getAttribute("event").trim().replace(/(^\/)|(\/$)/g,""):void 0},t.prototype.release_ids=function(){return this._release_ids||(this._release_ids=this.container.getAttribute("releases"))},t.prototype.releases=function(){return this.release_ids()?this.release_ids().split(","):[]},t.prototype.discount_code=function(){return this._discount_code?this._discount_code:this._discount_code=this.container.getAttribute("discount-code")},t.prototype.form_release_ids=function(){return this._form_release_ids||(this._form_release_ids=this.ticket_form().getAttribute("data-ticket-ids"))},t.prototype.form_releases=function(){return this.form_release_ids().split(",")},t.prototype.url=function(){var t;return t=[Tito.base_url,this.event_path(),"/widget.json?widget_name=",this.instance_id],this.release_ids()&&t.push("&release_ids="+this.release_ids()),this.discount_code()&&t.push("&discount_code="+this.discount_code()),t.join("")},t.prototype.submit_button=function(){return document.querySelectorAll("#"+this.ticket_form_id()+" .tito-submit")[0]},t.prototype.overlay_enabled=function(){return Tito.secure()&&this.ssl_required()||!this.ssl_required()},t.prototype.ssl_required=function(){return Tito.developmentMode===!0?!1:window.TitoDevelopmentMode===!0?!1:!this.container.hasAttribute("ssl-check-disabled")},t.prototype.iframe_id=function(){return"tito-iframe-"+this.instance_id},t.prototype.iframe_url=function(){var t;return t=[Tito.base_url,this.event_path(),"/allocations?widget_name=",this.instance_id],this.release_ids()&&t.push("&release_ids="+this.release_ids()),this.discount_code()&&t.push("&discount_code="+this.discount_code()),t.join("")},t.prototype.iframe=function(){return this._iframe?this._iframe:this._iframe=new Tito.Iframe(this.iframe_id(),this.iframe_url())},t.prototype.base_build=function(t){if(!this.container)throw new Tito.Errors.ContainerNotFound("container not found");return this.iframe().build(),Tito.jsonp(this.url(),function(e){return function(n){return"function"==typeof t&&t(n),"function"==typeof e.options&&e.options(e),e.options&&"function"==typeof e.options.success&&e.options.success(e),Tito.fire("event:landing",n)}}(this))},t}()}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function o(){this.constructor=e}for(var i in n)t.call(n,i)&&(e[i]=n[i]);return o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype,e};Tito.Widget=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.ticket_form_id=function(){var t;return t="tito-"+this.instance_id+"-tickets-form"},n.prototype.ticket_form=function(){return document.getElementById(this.ticket_form_id())},n.prototype.disable_form=function(){var t,e,n,o,i;for(e=this.ticket_form().elements,i=[],n=0,o=e.length;o>n;n++)t=e[n],i.push(t.readOnly=!0);return i},n.prototype.enable_form=function(){var t,e,n,o,i;for(e=this.ticket_form().elements,i=[],n=0,o=e.length;o>n;n++)t=e[n],i.push(t.readOnly=!1);return i},n.prototype.reset_submit_button=function(){return this.submit_button()?this.submit_button().innerHTML="Continue":void 0},n.prototype.build=function(){return this.base_build(function(t){return function(e){return t.container.innerHTML=e.view,t.ticket_form().onsubmit=function(){return t.valid()?(t.formdata=Tito.serialize(t.ticket_form()),t.action=t.ticket_form().action,Tito.modern_and_not_mobile()&&t.overlay_enabled()?(t.disable_form(),t.submit_button().innerHTML="Loading...",t.loadOverlay=function(){return t.reset_submit_button(),t.iframe().load_payment_form(t.formdata,t.action)},t.iframe().fire_load_event(),!1):(t.ticket_form().target="_blank",t.ticket_form().submit(),!1)):(alert("Please choose at least one ticket."),!1)},Tito.modern_and_not_mobile()?Tito.onMessages.push(function(e){var n;return"TitoMachine.close"===e.data.action?(t.iframe().reset(),n=document.getElementsByTagName("body")[0],n.style.overflow=Tito.defaultOverflow,t.ticket_form()&&t.enable_form(),t.reset_submit_button(),delete t.loadOverlay):void 0}):void 0}}(this))},n.prototype.valid=function(){var t,e,n,o,i,r,s,a;for(e=!1,o=0,a=this.form_releases(),r=0,s=a.length;s>r;r++)n=a[r],t="tito-"+this.instance_id+"-ticket-"+n,i=document.getElementById(t),i&&parseInt(i.value)>=o&&(o=parseInt(i.value));return o>0},n}(Tito.Base)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function o(){this.constructor=e}for(var i in n)t.call(n,i)&&(e[i]=n[i]);return o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype,e};Tito.Button=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.button_id=function(){return"button-"+this.instance_id},n.prototype.button=function(){return document.getElementById(this.button_id())},n.prototype.label=function(){return this._label?this._label:this._label=this.options.label?this.options.label:this.initial_html?this.initial_html:"Tickets"},n.prototype.button_element=function(){return'<button class="tito-tickets-button" id="'+this.button_id()+'">'+this.label()+"</button>"},n.prototype.set_label=function(){return this.container.innerHTML=this.button_element()},n.prototype.build=function(){return this.base_build(function(t){return function(){return t.set_label(),t.container.onclick=function(){return Tito.modern_and_not_mobile()&&t.overlay_enabled()?(t.button().innerHTML="Loading...",t.loadOverlay=function(){return t.set_label(),t.iframe().load_tickets_form(t.formdata,t.action)},t.iframe().fire_load_event(),!1):open("https://ti.to/"+t.event_path())},Tito.modern_and_not_mobile()?Tito.onMessages.push(function(e){var n;return"TitoMachine.close"===e.data.action?(t.iframe().reset(),n=document.getElementsByTagName("body")[0],n.style.overflow=Tito.defaultOverflow,t.set_label(),delete t.loadOverlay):void 0}):void 0}}(this))},n}(Tito.Base)}.call(this),function(){document.createElement("tito-widget"),document.createElement("tito-button"),Tito.contentLoaded(window,function(){var t,e,n,o,i,r,s,a,u;for(Tito.set_default_body_overflow(),s=Tito.widget_elements(),n=0,i=s.length;i>n;n++)e=s[n],new Tito.Widget({container:e}).build();for(a=Tito.button_elements(),u=[],o=0,r=a.length;r>o;o++)t=a[o],u.push(new Tito.Button({container:t}).build());return u}),window.onmessage=function(t){var e,n,o,i;for(i=Tito.onMessages,n=0,o=i.length;o>n;n++)(e=i[n])(t);if("TitoMachine.fireEvent"===t.data.action)return Tito.fire(t.data.eventName,t.data.data);if("TitoMachine.redirect"===t.data.action)return document.location.href=t.data.url;if("TitoMachine.load"===t.data.action){if(!Tito.widgets[t.data.widget_name].loadOverlay)return;return Tito.widgets[t.data.widget_name].loadOverlay()}}}.call(this);
